var link=document.querySelector(".map-btn");var popup=document.querySelector(".popup-form-container");var close=document.querySelector(".close-cross");var form=popup.querySelector("form");var login=popup.querySelector("[name = name]");var email=popup.querySelector("[name = email]");var isStorageSupport=!0;var storage="";try{storage=localStorage.getItem("login")}catch(err){isStorageSupport=!1}
link.addEventListener("click",function(evt){evt.preventDefault();popup.classList.add("show");if(storage){login.value=storage;email.focus()}else{login.focus()}});close.addEventListener("click",function(evt){evt.preventDefault();popup.classList.remove("show");popup.classList.remove("modal-error")});form.addEventListener("submit",function(evt){if(!login.value||!email.value){evt.preventDefault();popup.classList.remove("modal-error");popup.offsetWidth=popup.offsetWidth;popup.classList.add("modal-error")}else{if(isStorageSupport){localStorage.setItem("login",login.value)}}});window.addEventListener("keydown",function(evt){if(evt.keyCode===27){evt.preventDefault();if(popup.classList.contains("show")){popup.classList.remove("show");popup.classList.remove("modal-error")}}});ymaps.ready(function(){var myMap=new ymaps.Map('map',{center:[59.93913800574294,30.321521561386636],zoom:17},{searchControlProvider:'yandex#search'}),MyIconContentLayout=ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),myPlacemarkWithContent=new ymaps.Placemark([59.93874546240775,30.323177881614683],{},{iconLayout:'default#imageWithContent',iconImageHref:'../img/map-marker.png',iconImageSize:[231,190],iconImageOffset:[-54,-193],iconContentLayout:MyIconContentLayout});myMap.geoObjects.add(myPlacemarkWithContent)})